<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Staff Profile Creation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<script>
    function checkAvailability() {
        const username = document.getElementById("username");
        const email = document.getElementById("email");

        if (!username || !email) return;

        fetch("/staff/check-availability", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({
                username: username.value,
                email: email.value
            })
        })
        .then(r => r.json())
        .then(data => {
            document.getElementById("username-msg").innerHTML =
                data.exists
                ? "<span style='color:red'>Already exists</span>"
                : "<span style='color:green'>Available âœ”</span>";
        });
    }
</script>



<body>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert {{ category }}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<h2>Staff Profile Creation</h2>

<form method="POST">

    <label>Full Name</label>
    <input type="text" name="name" required>

    <label>Email</label>
    <input type="email" name="email" id="email" required onkeyup="checkAvailability()">
    <span id="email-msg"></span>

    <label>Username</label>
    <input type="text" name="username" id="username" required onkeyup="checkAvailability()">
    <span id="username-msg"></span>


    <label>Password</label>
    <input type="password" name="password" required>

    <label>Department</label>
    <select name="department" required>
        <option value="">Select Department</option>
        <option value="BSc IT">BSc IT</option>
        <option value="BSc CS">BSc CS</option>
        <option value="BCA">BCA</option>
    </select><br><br>

    <label>Designation</label>
    <select name="designation" required>
        <option value="">Select</option>
        <option value="Assistant Professor">Assistant Professor</option>
        <option value="Associate Professor">Associate Professor</option>
        <option value="Professor">Professor</option>
    </select><br><br>
    
`
     <br><br>
    <button type="submit">Create Profile</button>

</form>
<br>
<a href="{{ url_for('home') }}">Back to Home</a>
</body>
</html>
